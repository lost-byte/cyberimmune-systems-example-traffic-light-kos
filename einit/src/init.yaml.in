entities:

# The `ControlSystem` entity can call `LightsGPIO`.
- name: traffic_light.ControlSystem
  connections:
  - target: traffic_light.LightsGPIO
    id: lights_gpio_connection
@INIT_ControlSystem_ENTITY_CONNECTIONS@


# The `LightsGPIO` entity 
- name: traffic_light.LightsGPIO
  connections:
  - target: traffic_light.Diagnostics
    id: diagnostics_connection
@INIT_LightsGPIO_ENTITY_CONNECTIONS@

# The `Diagnostics` entity
- name: traffic_light.Diagnostics
#@INIT_Diagnostics_ENTITY_CONNECTIONS@

- name: traffic_light.Communication
  env:
    VFS_FILESYSTEM_BACKEND: client:@ROOTFS_ENTITY@
    VFS_NETWORK_BACKEND: client:kl.VfsNet
    MQTT_BROKER_ADDRESS: "@MQTT_BROKER_ADDRESS@"
    MQTT_BROKER_PORT: "@MQTT_BROKER_PORT@"
  connections:
  - target: kl.VfsNet
    id: kl.VfsNet
  - target: @ROOTFS_ENTITY@
    id: @ROOTFS_ENTITY@
@INIT_Communication_ENTITY_CONNECTIONS+@

@INIT_EXTERNAL_ENTITIES@